

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/head_img.png">
  <link rel="icon" href="/img/head_img.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="rgb(82,118,138)">
  <meta name="author" content="Vito">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、整体方案以及项目结构   技术方案 技术选型 解决问题    国际化框架 i18next 多语言资源管理和切换以及本地化   RTL支持 dir&#x3D;”rtl” + postcss-rtlcss 实现从右到左的布局和样式   本地化 day.js + Intl + i18next内置函数 本地化日期、数字等格式   辅助工具 VSCode 的 i18n Ally 插件 提升开发效率   12345">
<meta property="og:type" content="article">
<meta property="og:title" content="国际化开发解决方案指南">
<meta property="og:url" content="http://example.com/2024/05/20/%E5%9B%BD%E9%99%85%E5%8C%96%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="Vito&#39;s Blog">
<meta property="og:description" content="一、整体方案以及项目结构   技术方案 技术选型 解决问题    国际化框架 i18next 多语言资源管理和切换以及本地化   RTL支持 dir&#x3D;”rtl” + postcss-rtlcss 实现从右到左的布局和样式   本地化 day.js + Intl + i18next内置函数 本地化日期、数字等格式   辅助工具 VSCode 的 i18n Ally 插件 提升开发效率   12345">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/d74e994d-4a9f-44d5-861f-f4b2b0100822.png">
<meta property="og:image" content="http://example.com/img/b0b262fd-f44e-479f-b1cc-e6d0f44f3edf.png">
<meta property="og:image" content="http://example.com/img/97bb3144-af47-4c74-88d8-21e545094bba.png">
<meta property="og:image" content="http://example.com/img/22e69696-94a0-4dc7-9f5d-ce1f03673623.png">
<meta property="og:image" content="http://example.com/img/88c54352-db7b-42bd-a75b-42faeaa7ea3a.png">
<meta property="og:image" content="http://example.com/img/070b5844-bbcb-4f52-b7c7-6922d759ebe9.png">
<meta property="og:image" content="http://example.com/img/ef8323e8-64ef-4aae-a074-d5043b0cf8db.png">
<meta property="og:image" content="http://example.com/img/40f6c564-22aa-4435-9252-2b799fe6d878.png">
<meta property="og:image" content="http://example.com/img/aeb764d7-0d99-499f-8658-f7626b19b9ce.png">
<meta property="og:image" content="http://example.com/2024/05/20/%E5%9B%BD%E9%99%85%E5%8C%96%E5%BC%80%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%8C%87%E5%8D%97/img/9be84739-81ca-43d9-9fd6-428b90074034.png">
<meta property="og:image" content="http://example.com/img/18640717-df38-4d1a-94a6-a20a37e723c9.png">
<meta property="og:image" content="http://example.com/img/ff1437a2-1679-4ca1-b685-5cb2059fcb9f.png">
<meta property="og:image" content="http://example.com/img/078997a4-249f-4171-802a-9290af0c5f7b.png">
<meta property="og:image" content="http://example.com/img/b5878d00-7e60-414d-9d5f-20de2e7dccfb.png">
<meta property="og:image" content="http://example.com/img/2420b883-384d-4f6b-a1e2-905c0c9ca0d7.png">
<meta property="og:image" content="http://example.com/img/a7c0ee39-c57a-45c7-bd12-1599c3552058.png">
<meta property="og:image" content="http://example.com/img/2c069c40-f48e-4199-b405-0556bbe21398.png">
<meta property="og:image" content="http://example.com/img/02290760-eb14-4bbd-956c-5c0df22b0ab1.png">
<meta property="og:image" content="http://example.com/img/77886336-e35b-4af3-986e-3eb1f68d774f.png">
<meta property="og:image" content="http://example.com/img/5f0d99f9-935f-479e-a423-f230651a6c19.png">
<meta property="og:image" content="http://example.com/img/e015e71c-86dc-450b-84e9-f5261f8e3f5e.png">
<meta property="og:image" content="http://example.com/img/ffa34c45-08d8-4eed-ace3-8216d09c3e0d.png">
<meta property="og:image" content="http://example.com/img/36a36d3d-8acd-4d11-844f-bf738e94061e.png">
<meta property="og:image" content="http://example.com/img/49249dd8-3726-4736-8350-d4081f1851d0.png">
<meta property="og:image" content="http://example.com/img/8d67ef7f-1d7b-477f-b698-24e5bca92905.png">
<meta property="og:image" content="http://example.com/img/3b30c2e7-f2ca-474b-9aec-4f822de3651f.png">
<meta property="og:image" content="http://example.com/img/b9850b98-7ea6-4d13-882c-8d91d0873e60.png">
<meta property="og:image" content="http://example.com/img/3747fe94-95e3-4ce2-8637-96a24513d5e8.png">
<meta property="article:published_time" content="2024-05-20T04:25:01.000Z">
<meta property="article:modified_time" content="2024-10-26T03:32:21.028Z">
<meta property="article:author" content="Vito">
<meta property="article:tag" content="国际化">
<meta property="article:tag" content="方案">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/d74e994d-4a9f-44d5-861f-f4b2b0100822.png">
  
  
  
  <title>国际化开发解决方案指南 - Vito&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"|","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"gtag":null,"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Vito&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bg8.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="国际化开发解决方案指南"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-05-20 12:25" pubdate>
          2024年5月20日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          67 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">国际化开发解决方案指南</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="一、整体方案以及项目结构"><a href="#一、整体方案以及项目结构" class="headerlink" title="一、整体方案以及项目结构"></a>一、整体方案以及项目结构</h1><table>
<thead>
<tr>
<th><strong>技术方案</strong></th>
<th><strong>技术选型</strong></th>
<th><strong>解决问题</strong></th>
</tr>
</thead>
<tbody><tr>
<td>国际化框架</td>
<td>i18next</td>
<td>多语言资源管理和切换以及本地化</td>
</tr>
<tr>
<td>RTL支持</td>
<td>dir=”rtl” + postcss-rtlcss</td>
<td>实现从右到左的布局和样式</td>
</tr>
<tr>
<td>本地化</td>
<td>day.js + Intl + i18next内置函数</td>
<td>本地化日期、数字等格式</td>
</tr>
<tr>
<td>辅助工具</td>
<td>VSCode 的 <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://marketplace.visualstudio.com/items?itemName=lokalise.i18n-ally&source=article&objectId=2349931">i18n Ally</a> 插件</td>
<td>提升开发效率</td>
</tr>
</tbody></table>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18n-project<br>└─ src<br>   ├─ views<br>   │  └─ <span class="hljs-title class_">View1</span><br>   │     ├─ style.<span class="hljs-property">less</span><br>   │     └─ index.<span class="hljs-property">vue</span><br>   ├─ i18n<br>	 │  ├─ locales <span class="hljs-comment">// 存放翻译资源</span><br>	 │	├─ config <span class="hljs-comment">// 存放国际化相关配置</span><br>   │  └─ index.<span class="hljs-property">js</span> <span class="hljs-comment">// 国际化框架初始化</span><br>   ├─ compoments<br>   │  └─ <span class="hljs-title class_">Compoment1</span><br>   │     ├─ style.<span class="hljs-property">less</span><br>   │     └─ index.<span class="hljs-property">vue</span><br>   ├─ styles<br>	 │     ├─ theme <span class="hljs-comment">//存放主题文件</span><br>	 │     └─ languages <span class="hljs-comment">//存放语言样式文件</span><br>	 │        ├─ style_en.<span class="hljs-property">less</span> <span class="hljs-comment">//存放中文相关css变量</span><br>	 │        ├─ style_zh.<span class="hljs-property">less</span> <span class="hljs-comment">//存放英文相关css变量</span><br>	 │        └─ index.<span class="hljs-property">less</span> <span class="hljs-comment">//汇聚style_zh、style_en的变量</span><br>   │     ├─ <span class="hljs-variable language_">global</span>.<span class="hljs-property">less</span> <span class="hljs-comment">//全局类样式</span><br>   │     └─ index.<span class="hljs-property">less</span> <span class="hljs-comment">//只用于汇聚样式</span><br>   └─ main.<span class="hljs-property">js</span><br><br></code></pre></td></tr></table></figure>

<h1 id="二、国际化框架"><a href="#二、国际化框架" class="headerlink" title="二、国际化框架"></a>二、国际化框架</h1><h2 id="1-框架选择"><a href="#1-框架选择" class="headerlink" title="1. 框架选择"></a>1. 框架选择</h2><p>整体框架采用i8next，原因如下：</p>
<ul>
<li>是最早的国际化框架</li>
<li>适用框架广泛，是一个通用的解决方案，使学习成本降低</li>
<li>社区活跃，插件众多，提供很多优化方案</li>
<li>可扩展性，提供了将翻译拆分为多个文件的选项，并按需加载它们</li>
</ul>
<p>具体对比如下：</p>
<table>
<thead>
<tr>
<th><strong>对比项目</strong></th>
<th><strong>react-intl</strong></th>
<th><strong>i18next</strong></th>
<th><strong>vue-i18n</strong></th>
<th><strong>kiwi</strong></th>
</tr>
</thead>
<tbody><tr>
<td>多语言支持</td>
<td>提供丰富的多语言支持，包括常见语言和地区的特定格式化</td>
<td>支持多种语言，并且能够灵活处理复杂的语言结构</td>
<td>支持多种语言，能够满足 Vue 应用的多语言需求</td>
<td>支持多语言，语言格式强制language-region格式</td>
</tr>
<tr>
<td>适用框架</td>
<td>主要适用于 React 框架</td>
<td>适用于多种框架，具有广泛的适用性</td>
<td>专为 Vue.js 框架设计</td>
<td>任何框架</td>
</tr>
<tr>
<td>社区和文档支持</td>
<td>拥有活跃的社区和丰富的文档，有大量的示例和教程，但插件生态较少</td>
<td>社区活跃，文档详细且全面，有许多官方和第三方插件</td>
<td>社区活跃，文档较为完善，但插件生态较少</td>
<td>社区活跃度一般，文档写的比较简单，但插件生态很少</td>
</tr>
<tr>
<td>npm周下载数</td>
<td>1,443,114</td>
<td>4,795,569</td>
<td>1,045,674</td>
<td>342</td>
</tr>
<tr>
<td>性能和效率</td>
<td>性能较好，在 React 应用中的集成相对高效</td>
<td>性能表现出色，能够处理大规模的语言数据</td>
<td>在 Vue 应用中的性能表现良好，能有效处理语言切换</td>
<td>未有实际数据</td>
</tr>
<tr>
<td>本地化支持</td>
<td>对本地化的支持较为全面，包括日期、数字、货币等的格式化</td>
<td>提供强大的本地化功能，支持自定义本地化规则</td>
<td>能够很好地支持 Vue 应用中的本地化需求</td>
<td>支持单复数，其他本地化需要搭配原生Intl api</td>
</tr>
<tr>
<td>优势</td>
<td>1⃣️ react-intl 是基于 react 整合了 format.js 的 一套 react 国际化方案。</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2⃣️ 提供了国际化前端转换的完整方案（即字符串、时间、日期的转换）</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3⃣️ 易使用</td>
<td>1⃣️ 多框架的通用解决方案</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2⃣️ 社区活跃，插件丰富，功能更全</td>
<td>1⃣️ 为 Vue 专门设计，与 Vue 框架结合紧密，</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2⃣️ 易使用提供了简洁的 API 和易用性</td>
<td>1⃣️ 提供key的自动翻译和提取和未提取key的辅助检查</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2⃣️ 通用的国际化框架，不绑定任何框架</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>缺点</td>
<td>插件生态偏少</td>
<td>api相对复杂，学习成本较高</td>
<td>插件生态偏少</td>
<td>会失去一些灵活性</td>
</tr>
</tbody></table>
<h2 id="2-框架配置"><a href="#2-框架配置" class="headerlink" title="2.框架配置"></a>2.框架配置</h2><p><img src="/img/d74e994d-4a9f-44d5-861f-f4b2b0100822.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-1-语言检测"><a href="#2-1-语言检测" class="headerlink" title="2.1 语言检测"></a>2.1 语言检测</h3><p><img src="/img/b0b262fd-f44e-479f-b1cc-e6d0f44f3edf.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LanguageDetector</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;i18next-browser-languagedetector&#x27;</span><br><br>i18next<br>  .<span class="hljs-title function_">use</span>(<span class="hljs-title class_">LanguageDetector</span>)<br>  .<span class="hljs-title function_">init</span>(&#123;<br>    ...<br>    <span class="hljs-attr">detection</span>: &#123;<br>      <span class="hljs-attr">order</span>: [<span class="hljs-string">&#x27;localStorage&#x27;</span>, <span class="hljs-string">&#x27;navigator&#x27;</span>, <span class="hljs-string">&#x27;querystring&#x27;</span>],<br>      <span class="hljs-attr">lookupQuerystring</span>: <span class="hljs-string">&#x27;lang&#x27;</span>,<br>    &#125;,<br>  &#125;)<br><br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br><span class="hljs-comment">//初始语言检测</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLang</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> language = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;language&#x27;</span>)<br>    <span class="hljs-keyword">if</span>(!language)&#123;<br>        <span class="hljs-comment">// 检测用户语言偏好并设置对应的语言</span><br>        <span class="hljs-keyword">const</span> languageMap = [<span class="hljs-string">&#x27;zh&#x27;</span>,<span class="hljs-string">&#x27;en&#x27;</span>,<span class="hljs-string">&#x27;ar&#x27;</span>,<span class="hljs-string">&#x27;es&#x27;</span>,<span class="hljs-string">&#x27;ja&#x27;</span>,<span class="hljs-string">&#x27;ru&#x27;</span>]<br>        <span class="hljs-keyword">const</span> fallbackLanguage = <span class="hljs-string">&#x27;en&#x27;</span>;   <span class="hljs-comment">// 默认语言为英文</span><br>        <span class="hljs-keyword">const</span> userLanguage = navigator.<span class="hljs-property">language</span> || navigator.<span class="hljs-property">userLanguage</span>;<br>        language = languageMap.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">lang</span> =&gt;</span> userLanguage.<span class="hljs-title function_">startsWith</span>(lang)) || fallbackLanguage;<br>        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;language&#x27;</span>, language);<br>    &#125;<br>    <span class="hljs-keyword">return</span> language;<br>&#125;<br><br><span class="hljs-comment">//i18next初始化后的语言检测</span><br><br>$i18next.<span class="hljs-property">language</span><br></code></pre></td></tr></table></figure>

<h3 id="2-2-语言切换"><a href="#2-2-语言切换" class="headerlink" title="2.2 语言切换"></a>2.2 语言切换</h3><p>脱离框架影响，利用JS原生的 <code>dispatchEvent</code>实现一个类似的观察者模式</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">changeDocumentDir</span>(<span class="hljs-params">language</span>)&#123;<br>		<span class="hljs-keyword">if</span>(language === <span class="hljs-string">&quot;ar&quot;</span> )&#123;<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;dir&#x27;</span>,<span class="hljs-string">&#x27;rtl&#x27;</span>)<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;dir&#x27;</span>,<span class="hljs-string">&#x27;ltr&#x27;</span>)<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 定义一个处理全局语言更改的函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleGloalLanguage</span>(<span class="hljs-params">nextLanguage</span>)&#123;<br>    <span class="hljs-comment">// 向文档派发一个自定义事件 &#x27;language-change&#x27;，并传递下一个语言作为详情</span><br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&#x27;language-change&#x27;</span>,&#123;<span class="hljs-attr">detail</span>: nextLanguage&#125;))<br>&#125;<br><br><span class="hljs-comment">// 定义一个监听本地语言切换函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">registerLocalChange</span>(<span class="hljs-params">i18nCallBack</span>)&#123;<br>    <span class="hljs-comment">// 为文档添加 &#x27;language-change&#x27; 事件的监听</span><br>    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;language-change&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">&#123; detail &#125;</span>)=&gt;</span>&#123;<br>        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;language&#x27;</span>,detail)<br>        <span class="hljs-title function_">i18nCallBack</span>(detail)<br>    &#125;)<br>&#125;<br><br><span class="hljs-title function_">registerLocalChange</span>(<span class="hljs-function">(<span class="hljs-params">nextLanguage</span>)=&gt;</span>&#123;<br>		<span class="hljs-comment">//改变文档的阅读方向</span><br>    <span class="hljs-title function_">changeDocumentDir</span>(nextLanguage)<br>    <span class="hljs-comment">// 调用改变html的lang属性</span><br>    <span class="hljs-title function_">changeHtmlLang</span>(nextLanguage)<br>    <span class="hljs-comment">// 调用改变系统语言的函数</span><br>    i18next.<span class="hljs-title function_">changeLanguage</span>(nextLanguage)<br>    <span class="hljs-comment">// 调用改变组件语言的函数</span><br>    <span class="hljs-title function_">changePuiLanguage</span>(nextLanguage)<br>&#125;)<br><br><span class="hljs-comment">// 在 Vue 原型上添加一个全局属性 &#x27;$global&#x27;，其中包含 &#x27;changeLanguage&#x27; 方法</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$global</span> = &#123;<br>    <span class="hljs-attr">changeLanguage</span>:handleGloalLanguage<br>&#125;<br><br><span class="hljs-comment">// 在 Vue 页面中调用 &#x27;$global&#x27; 的 &#x27;changeLanguage&#x27; 方法，并传递 &#x27;en&#x27; 作为参数</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$global</span>.<span class="hljs-title function_">changeLanguage</span>(<span class="hljs-string">&#x27;en&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="2-3-资源获取"><a href="#2-3-资源获取" class="headerlink" title="2.3 资源获取"></a>2.3 资源获取</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalesMessage</span>(<span class="hljs-params">lang</span>) &#123;<br>    <span class="hljs-keyword">let</span> message = &#123;&#125;;<br>    <span class="hljs-keyword">let</span> modules = [<span class="hljs-string">&#x27;common&#x27;</span>, <span class="hljs-string">&#x27;glossary&#x27;</span>, <span class="hljs-string">&#x27;validation&#x27;</span>, <span class="hljs-string">&#x27;login&#x27;</span>];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable language_">module</span> <span class="hljs-keyword">of</span> modules) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">let</span> jsonObj = <span class="hljs-built_in">require</span>(<span class="hljs-string">`./locales/<span class="hljs-subst">$&#123;lang&#125;</span>/<span class="hljs-subst">$&#123;<span class="hljs-variable language_">module</span>&#125;</span>.json`</span>);<br>            message[<span class="hljs-variable language_">module</span>] = jsonObj;<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">module</span>&#125;</span>报错！！！！`</span>, error);<br>        &#125;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;message&quot;</span>, message);<br>    <span class="hljs-keyword">return</span> message;<br>&#125;<br><br><span class="hljs-comment">//资源获取</span><br><span class="hljs-keyword">let</span> zh = <span class="hljs-title function_">getLocalesMessage</span>(<span class="hljs-string">&#x27;zh&#x27;</span>)<br><span class="hljs-keyword">let</span> en = <span class="hljs-title function_">getLocalesMessage</span>(<span class="hljs-string">&#x27;en&#x27;</span>)<br>...<br></code></pre></td></tr></table></figure>

<h3 id="2-4-i18next初始化"><a href="#2-4-i18next初始化" class="headerlink" title="2.4 i18next初始化"></a>2.4 i18next初始化</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalesMessage</span>(<span class="hljs-params">lang</span>) &#123;<br>    <span class="hljs-keyword">let</span> message = &#123;&#125;;<br>    <span class="hljs-keyword">let</span> modules = [<span class="hljs-string">&#x27;common&#x27;</span>, <span class="hljs-string">&#x27;glossary&#x27;</span>, <span class="hljs-string">&#x27;validation&#x27;</span>, <span class="hljs-string">&#x27;table&#x27;</span>];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable language_">module</span> <span class="hljs-keyword">of</span> modules) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">let</span> jsonObj = <span class="hljs-built_in">require</span>(<span class="hljs-string">`./locales/<span class="hljs-subst">$&#123;lang&#125;</span>/<span class="hljs-subst">$&#123;<span class="hljs-variable language_">module</span>&#125;</span>.json`</span>);<br>            message[<span class="hljs-variable language_">module</span>] = jsonObj;<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">module</span>&#125;</span>报错！！！！`</span>, error);<br>        &#125;<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;message&quot;</span>, message);<br>    <span class="hljs-keyword">return</span> message;<br>&#125;<br><br>  <span class="hljs-keyword">let</span> zh = <span class="hljs-title function_">getLocalesMessage</span>(<span class="hljs-string">&#x27;zh&#x27;</span>);<br>  <span class="hljs-keyword">let</span> en = <span class="hljs-title function_">awgetLocalesMessage</span>(<span class="hljs-string">&#x27;en&#x27;</span>);<br><br>i18next<br> .<span class="hljs-title function_">use</span>(<span class="hljs-title class_">LanguageDetector</span>) <span class="hljs-comment">// 引入语言检测器插件</span><br> .<span class="hljs-title function_">init</span>(&#123;<br>      <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 关闭调试模式</span><br>      <span class="hljs-attr">detection</span>: &#123;<br>        <span class="hljs-attr">order</span>: [<span class="hljs-string">&#x27;localStorage&#x27;</span>, <span class="hljs-string">&#x27;navigator&#x27;</span>], <span class="hljs-comment">// 语言检测的顺序，先查找本地存储，再通过浏览器导航器</span><br>        <span class="hljs-attr">lookupLocalStorage</span>: <span class="hljs-string">&#x27;language&#x27;</span>, <span class="hljs-comment">// 在本地存储中查找的键为 &#x27;language&#x27;</span><br>      &#125;,<br>      <span class="hljs-attr">fallbackLng</span>: <span class="hljs-string">&#x27;en&#x27;</span>, <span class="hljs-comment">// 当无法确定语言时，回退使用英语</span><br>      <span class="hljs-attr">ns</span>: [<span class="hljs-string">&#x27;common&#x27;</span>, <span class="hljs-string">&#x27;login&#x27;</span>], <span class="hljs-comment">// 定义命名空间</span><br>      <span class="hljs-attr">defaultNS</span>: [<span class="hljs-string">&#x27;common&#x27;</span>], <span class="hljs-comment">// 设置默认命名空间</span><br>      <span class="hljs-attr">interpolation</span>: &#123;<br>        <span class="hljs-attr">escapeValue</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 插值时不转义值</span><br>      &#125;,<br>      <span class="hljs-attr">resources</span>: &#123; <br>        zh,<br>        en<br>      &#125;<br>    &#125;, <span class="hljs-function">(<span class="hljs-params">err, t</span>) =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;err&quot;</span>, err); <span class="hljs-comment">// 初始化完成后的回调，打印可能出现的错误</span><br>    &#125;);<br></code></pre></td></tr></table></figure>

<h1 id="三、语言管理"><a href="#三、语言管理" class="headerlink" title="三、语言管理"></a>三、语言管理</h1><h2 id="1-翻译资源管理"><a href="#1-翻译资源管理" class="headerlink" title="1. 翻译资源管理"></a>1. 翻译资源管理</h2><h3 id="1-1-目录存放"><a href="#1-1-目录存放" class="headerlink" title="1.1 目录存放"></a>1.1 目录存放</h3><p>通常放在  <code>i18n</code> 目录下的<code>locales</code>里。比如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">/src<br>  /i18n<br>	  /locales<br>	    /zh<br>	    /en<br>			...<br></code></pre></td></tr></table></figure>

<h3 id="1-2-模块划分"><a href="#1-2-模块划分" class="headerlink" title="1.2 模块划分"></a>1.2 模块划分</h3><p>推荐如下结构来<code>按照业务来聚合&#39;实现&#39;</code>，大部分情况不应该将所有的语言包一股脑放在一起，除非项目比较简单。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx"> i18n-project<br>└─ i18n<br>	 └─ locales<br>		  ├─ en<br>	    │  ├─ common.<span class="hljs-property">json</span> <span class="hljs-comment">//公用常用交互词</span><br>      │  ├─ glossary.<span class="hljs-property">json</span> <span class="hljs-comment">// 专有名词</span><br>      │  ├─ validation.<span class="hljs-property">json</span> <span class="hljs-comment">//存放全局验证信息</span><br>	    │  ├─ moduleD.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块D里资源串</span><br>	    │  ├─ moduleB.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块B里资源串</span><br>	    │  ├─ moduleC.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块C里资源串</span><br>	    │  └─ moduleA.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块A里资源串</span><br>	    ├─ ar<br>	    │  ├─ common.<span class="hljs-property">json</span> <span class="hljs-comment">//公用常用交互词</span><br>      │  ├─ glossary.<span class="hljs-property">json</span> <span class="hljs-comment">// 专有名词</span><br>      │  ├─ validation.<span class="hljs-property">json</span> <span class="hljs-comment">//存放全局验证信息</span><br>	    │  ├─ moduleD.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块D里资源串</span><br>	    │  ├─ moduleB.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块B里资源串</span><br>	    │  ├─ moduleC.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块C里资源串</span><br>	    │  └─ moduleA.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块A里资源串</span><br>	    └─ zh<br>	       ├─ ...<br></code></pre></td></tr></table></figure>

<ul>
<li>优点：<ul>
<li>按照语言进行分类，每个语言下又细分了不同的模块，组织较为清晰。</li>
<li>便于针对特定语言进行模块配置的管理和维护。</li>
</ul>
</li>
<li>缺点：<ul>
<li>结构相对复杂，对于简单的项目可能会显得过于繁琐。</li>
<li>增加了文件路径的深度，可能在操作文件时增加一些复杂性。</li>
</ul>
</li>
</ul>
<h3 id="1-3-模块颗粒度把握"><a href="#1-3-模块颗粒度把握" class="headerlink" title="1.3 模块颗粒度把握"></a>1.3 模块颗粒度把握</h3><p>模块划分的颗粒度越小，它的扩展性越强，方便后期整合新的资源。但是颗粒度过细会增加模块管理的复杂性，可能导致过多的小模块，使得系统架构显得过于繁琐，所以需要在颗粒度的粗细之间找到一个平衡，以实现最佳的扩展性和可维护性。</p>
<p>通常按照<code>业务模块</code>的粒度来划分。<strong>业务模块是由一个或多个页面组成的完整的功能</strong>。</p>
<p>业务模块可以是一个<code>子域</code>、甚至更小粒度的<code>聚合</code>。总之这个业务模块有以下特征：</p>
<ul>
<li>自包含。自给自足实现一个完整的功能闭环</li>
<li>高聚合。对外部依赖较少。</li>
</ul>
<p><img src="/img/97bb3144-af47-4c74-88d8-21e545094bba.png" srcset="/img/loading.gif" lazyload></p>
<p>模块文件建议如下划分：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18n-project<br>└─ i18n<br>   ├─ en<br>   │  ├─ common.<span class="hljs-property">json</span> <span class="hljs-comment">//公用常用交互词</span><br>   │  ├─ glossary.<span class="hljs-property">json</span> <span class="hljs-comment">// 专有名词</span><br>   │  ├─ your-moudule-name.<span class="hljs-property">json</span> <span class="hljs-comment">//项目模块里资源串</span><br>   │  └─ validation.<span class="hljs-property">json</span> <span class="hljs-comment">//存放全局验证信息</span><br>   └─ ...<br><br></code></pre></td></tr></table></figure>

<h3 id="1-4-资源串命名"><a href="#1-4-资源串命名" class="headerlink" title="1.4 资源串命名"></a>1.4 资源串命名</h3><p>1.4.1 命名原则</p>
<ul>
<li>唯一性：每个键应该对应唯一的文本内容。</li>
<li>与原文保持一致：如果可能，键的名称应与原始文本有一定的关联。</li>
<li>考虑扩展性：为未来可能的新增文本预留足够的空间。</li>
</ul>
<p><img src="/img/22e69696-94a0-4dc7-9f5d-ce1f03673623.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br>&#123;<br>		<span class="hljs-attr">taskname</span>:<span class="hljs-string">&#x27;任务名称&#x27;</span>，<br>		<span class="hljs-attr">tasknameplaceholder</span>:<span class="hljs-string">&#x27;请输入任务名称&#x27;</span><br>		<span class="hljs-attr">modalname</span>:<span class="hljs-string">&#x27;模型名称&#x27;</span>,<br>		<span class="hljs-attr">modalnameplaceholder</span>:<span class="hljs-string">&#x27;请输入模型名称&#x27;</span><br>		<span class="hljs-attr">modalversion</span>:<span class="hljs-string">&#x27;模型版本&#x27;</span>,<br>		<span class="hljs-attr">modalversionplaceholder</span>:<span class="hljs-string">&#x27;请输入模型版本&#x27;</span><br>		<span class="hljs-attr">reset</span>:<span class="hljs-string">&#x27;重置&#x27;</span>,<br>		<span class="hljs-attr">search</span>:<span class="hljs-string">&#x27;搜索&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;<br>		<span class="hljs-attr">taskname</span>:<span class="hljs-string">&#x27;任务名称&#x27;</span>,<br>		<span class="hljs-attr">tasknameplaceholder</span>:<span class="hljs-string">&#x27;请输入任务名称&#x27;</span><br>		<span class="hljs-attr">tasktime</span>:<span class="hljs-string">&#x27;任务时间&#x27;</span>,<br>		<span class="hljs-attr">tasktimeplaceholder</span>:<span class="hljs-string">&#x27;请输入任务时间&#x27;</span><br>		...<br>&#125;<br></code></pre></td></tr></table></figure>

<p>1.4.2 推荐命名</p>
<p>模块名称-功能名称-相关名 =xxxxxx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">//表格模块的高级查询的label——〉假如叫：任务名称</span><br><br>table-advancequery-<span class="hljs-attr">formlabel1</span>:“任务名称”<span class="hljs-comment">//推荐命名</span><br><br><span class="hljs-attr">taskName</span>:“任务名称” <span class="hljs-comment">//不推荐</span><br><br><span class="hljs-comment">// </span><br></code></pre></td></tr></table></figure>

<p>注意：【相关名】规则不同，模块要求不同</p>
<ul>
<li>common、glossary、validation 公共模块中的【相关名】直接以语义命名即可。</li>
<li>页面自己的 key 的【相关名】要求以场景、位置相关描述，主要应对 key 后续的变化，提高扩展性。  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br><span class="hljs-comment">// table</span><br>&#123;<br>		table-form-<span class="hljs-attr">label1</span>:<span class="hljs-string">&#x27;任务名称&#x27;</span>，<br>		table-form-<span class="hljs-attr">placeholder1</span>:<span class="hljs-string">&#x27;请输入任务名称&#x27;</span><br>		...<br>&#125;<br><br><span class="hljs-comment">//common</span><br>&#123;<br>		common-<span class="hljs-attr">reset</span>:<span class="hljs-string">&#x27;重置&#x27;</span>,<br>		common-search：<span class="hljs-string">&#x27;搜索&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-5-语言标签"><a href="#1-5-语言标签" class="headerlink" title="1.5 语言标签"></a>1.5 语言标签</h3><p>多语言的语言标签通常遵循 <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://en.wikipedia.org/wiki/IETF_language_tag&source=article&objectId=2349931">BCP 47</a>， 这是由互联网工程任务组（IETF）发布的一种语言标签规范，用于唯一标识各种语言。格式为 <code>lng-(script)-(Region 区域)-(Variant 变体)</code>，例如 zh-Hans-CN、en-US、zh-Hant 等等。</p>
<p>因为语言标签形式多种多样，而且不同的环境给出的结果可能都不太一样，所以建议开发者在维护语言包时统一使用语言标签，并且前后端保持统一。</p>
<p>例如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">en 默认英文<br>zh 默认简体中文<br>zh-Hant 默认繁体<br>th 默认泰文<br></code></pre></td></tr></table></figure>

<p>同时维护一些语言标签的映射规则：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tsx">&#123;<br>  <span class="hljs-string">&quot;zh-TW&quot;</span>: <span class="hljs-string">&quot;zh-Hant-TW&quot;</span>,<br>  <span class="hljs-string">&quot;zh-HK&quot;</span>: <span class="hljs-string">&quot;zh-Hant-HK&quot;</span>,<br>  <span class="hljs-string">&quot;zh-MO&quot;</span>: <span class="hljs-string">&quot;zh-Hant-MO&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用的 en、zh、zh-Hant、th 这些语言标签都是 <code>lng-(script)</code> 形式，这样兜底/命中效果会更好：</p>
<p>举个例子 <code>zh-Hant-TW</code> 的 <code>Locale chain</code> 是 <code>[&#39;zh-Hant-TW&#39;, &#39;zh-Hant&#39;, &#39;zh&#39;]</code> , 会回退加载 <code>zh-Hant</code> 和 <code>zh</code> 语言包。 如果有朝一日，需要对 TW 地区做特殊的适配，我们再创建一个更具体 <code>zh-Hant-TW</code> 语言包就行了。</p>
<h2 id="2-静态文案翻译"><a href="#2-静态文案翻译" class="headerlink" title="2.静态文案翻译"></a>2.静态文案翻译</h2><p>静态文案通常指在 Web 应用中相对固定、不随用户操作或系统状态实时变化的文本内容。</p>
<p>利用i18next的$t函数自动匹配即可</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// zh.json</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;inputText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;请输入&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;selectText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;请选择&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;startTimeText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;开始时间&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;endTimeText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;结束时间&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;login&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;登录&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;该项为必填项&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;loginOut&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;退出系统&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;document&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;项目文档&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;profile&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;个人中心&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">// en.json</span><br><span class="hljs-punctuation">&#123;</span><br>		<span class="hljs-attr">&quot;inputText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Please enter&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;selectText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Please select&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;startTimeText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Start time&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;endTimeText&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;End time&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;login&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Log in&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;This item is a required field&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;loginOut&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Logout of the system&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;document&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Project documentation&quot;</span><span class="hljs-punctuation">,</span><br>		<span class="hljs-attr">&quot;profile&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Personal center&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="3-动态文案翻译（本地动态、后端动态）"><a href="#3-动态文案翻译（本地动态、后端动态）" class="headerlink" title="3.动态文案翻译（本地动态、后端动态）"></a>3.动态文案翻译（本地动态、后端动态）</h2><p>动态文案一般分几种：、基于后端数据库的动态文案</p>
<ul>
<li>基于前端的部分动态文案<ul>
<li>例如： XXXX校验成功、XXX用户登录成功。</li>
</ul>
</li>
<li>基于后端数据库的动态文案<ul>
<li>搜索热词</li>
<li>服务器相关错误提示</li>
<li>评论</li>
</ul>
</li>
</ul>
<p>方案一：接口增加语言参数，后端直接返回相应的语言。</p>
<p>方案二：与后端增加代码映射，将文本放到前端字典中。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// zh.json</span><br><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;10002&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;登录成功！&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;10003&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;登录失败&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;10004&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;用户密码错误&quot;</span><span class="hljs-punctuation">,</span><br>...<br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">// zh.json</span><br><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;10002&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Login succeeded!&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;10003&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Login failed&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;10004&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;User password error&quot;</span><span class="hljs-punctuation">,</span><br>...<br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<h1 id="四、-静态资源"><a href="#四、-静态资源" class="headerlink" title="四、 静态资源"></a>四、 静态资源</h1><h2 id="1-图片"><a href="#1-图片" class="headerlink" title="1. 图片"></a>1. 图片</h2><p><strong>推荐使用统一的命名约定，统一以</strong><code>xxx_&#123;lang&#125;</code><strong>格式命名</strong></p>
<p>给图片文件名添加语言标识，例如 <code>button_en.png</code> 和 <code>button_zh.png</code>。</p>
<ul>
<li>优点：不需要为每种语言创建单独的文件夹，节省结构层次，方便使用切换</li>
<li>缺点：文件名可能会变得较长且不太直观。</li>
</ul>
<h2 id="2-图标"><a href="#2-图标" class="headerlink" title="2.图标"></a>2.图标</h2><p>推荐使用<code>svg compoment</code>或者<code>iconfont</code>来使用图标，理由如下：</p>
<ul>
<li><code>iconfont</code>和<code>svg components</code>都是基于矢量图形构建的，不存在失真</li>
<li>拥有比png、jpg格式更小的文件大小</li>
<li>统一管理图标，方便后期对于RTL组件的维护</li>
</ul>
<p><code>Iconfont</code> 使用方式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;icon-name&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><code>svg component</code> 使用方式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">icon-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">icon-name</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>注： <code>svg components</code> 一般由组件库提供 ，不同的组件库的组件使用方式不同。</p>
<h1 id="五、样式"><a href="#五、样式" class="headerlink" title="五、样式"></a>五、样式</h1><h2 id="1-样式结构"><a href="#1-样式结构" class="headerlink" title="1.样式结构"></a>1.样式结构</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18n-project<br>└─ src<br>   ├─ views<br>   │  └─ <span class="hljs-title class_">View1</span><br>   │     ├─ style.<span class="hljs-property">less</span><br>   │     └─ index.<span class="hljs-property">vue</span><br>   ├─ compoments<br>   │  └─ <span class="hljs-title class_">Compoment1</span><br>   │     ├─ style.<span class="hljs-property">less</span><br>   │     └─ index.<span class="hljs-property">vue</span><br>   ├─ styles<br>	 │     ├─ theme <span class="hljs-comment">//存放主题文件</span><br>	 │     └─ languages <span class="hljs-comment">//存放语言样式文件</span><br>	 │        ├─ style_en.<span class="hljs-property">less</span> <span class="hljs-comment">//存放中文相关css变量</span><br>	 │        ├─ style_zh.<span class="hljs-property">less</span> <span class="hljs-comment">//存放英文相关css变量</span><br>	 │        └─ index.<span class="hljs-property">less</span> <span class="hljs-comment">//汇聚style_zh、style_en的变量</span><br>   │     ├─ <span class="hljs-variable language_">global</span>.<span class="hljs-property">less</span> <span class="hljs-comment">//全局类样式</span><br>   │     └─ index.<span class="hljs-property">less</span> <span class="hljs-comment">//只用于汇聚样式</span><br>   └─ ...<br></code></pre></td></tr></table></figure>

<h2 id="2-多语言样式适配策略"><a href="#2-多语言样式适配策略" class="headerlink" title="2.多语言样式适配策略"></a>2.多语言样式适配策略</h2><p>不同语言在设计和开发中都需要提供合适的行高、行艰巨或字号，来保证页面最佳视觉体验。</p>
<h3 id="2-1-根据语言处理不同样式"><a href="#2-1-根据语言处理不同样式" class="headerlink" title="2.1 根据语言处理不同样式"></a>2.1 根据语言处理不同样式</h3><p>在开发时，建议将语言特定的文本样式（如字体大小、颜色、对齐方式等）与通用的布局样式分开，创建专门的语言样式文件，以便于针对性地管理和维护。</p>
<p>例如，一个多语言网站项目中，对于英语页面，标题的字体颜色可能是蓝色；而对于法语页面，由于文化和设计偏好，标题字体颜色可能是红色。通过分离样式文件，我们可以在 <code>styles_en.css</code> 中设置标题颜色为蓝色，在 <code>styles_fr.css</code> 中设置为红色，从而实现对不同语言页面样式的精准管理。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs less"> <span class="hljs-comment">// style-zh.less</span><br><span class="hljs-selector-pseudo">:root</span>,<br><span class="hljs-selector-pseudo">:root</span><span class="hljs-selector-attr">[lang=<span class="hljs-string">&quot;zh&quot;</span>]</span>&#123;<br>		<span class="hljs-attr">--font-size</span>: 14px;<br>		<span class="hljs-attr">--line-height</span>:1.5<br>		<span class="hljs-attr">--font-color</span>:rgb(0,0,0,0.9)<br>		<span class="hljs-attr">--font-family</span>:&quot;微软雅黑&quot;<br>		<br>&#125;<br><br><span class="hljs-comment">// style-ar.less</span><br><span class="hljs-selector-pseudo">:root</span><span class="hljs-selector-attr">[lang=<span class="hljs-string">&quot;ar&quot;</span>]</span>&#123;<br>		<span class="hljs-attr">--font-size</span>: 16px;<br>		<span class="hljs-attr">--line-height</span>:1.5<br>		<span class="hljs-attr">--font-color</span>:rgb(0,0,0)<br>		<span class="hljs-attr">--font-family</span>:&quot;Noto Naskh&quot;,&quot;Microsoft YaHei&quot;;<br>		<br>&#125;<br><br><span class="hljs-comment">// .global.less</span><br><span class="hljs-selector-tag">body</span>&#123;<br>	<span class="hljs-attribute">font-size</span>:<span class="hljs-built_in">var</span>(--font-size);<br>	<span class="hljs-attribute">line-height</span>:<span class="hljs-built_in">var</span>(--line-height);<br>	<span class="hljs-attribute">font-color</span>:<span class="hljs-built_in">var</span>(--font-color);<br>	<span class="hljs-attribute">font-family</span>:<span class="hljs-built_in">var</span>(--font-family);<br>	<br>&#125;<br><br><br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">switchTheme</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>      <span class="hljs-keyword">if</span> (root.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">&#x27;data-theme&#x27;</span>) === <span class="hljs-string">&#x27;light&#x27;</span>) &#123;<br>        root.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data-theme&#x27;</span>, <span class="hljs-string">&#x27;dark&#x27;</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        root.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;data-theme&#x27;</span>, <span class="hljs-string">&#x27;light&#x27;</span>);<br>      &#125;<br>    &#125;<br>    <br>    <br>    <br> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeHtmlLang</span>(<span class="hljs-params">language</span>) &#123;<br>      <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;<br>      <span class="hljs-keyword">if</span> (language) &#123;<br>        root.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;lang&#x27;</span>, language);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        root.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&#x27;lang&#x27;</span>, <span class="hljs-string">&#x27;en&#x27;</span>);<br>      &#125;<br>   &#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-pseudo">:root</span>,<br><span class="hljs-selector-pseudo">:root</span><span class="hljs-selector-attr">[lang=<span class="hljs-string">&quot;zh&quot;</span>]</span><span class="hljs-selector-attr">[data-theme=<span class="hljs-string">&quot;dark&quot;</span>]</span>&#123;<br>		<span class="hljs-attr">--brand-color-1</span>: #F3F5FD;<br>		<span class="hljs-attr">--brand-color-2</span>: #ECF0FE;<br>		<span class="hljs-attr">--brand-color-3</span>: #E4E9FA;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>应根据不同语言特性设置定制的样式，保证页面的视觉平衡，所以在开发中可以使用以下几种方案：</p>
<p><strong>2.1.1. 通过 JavaScript 动态添加样式</strong></p>
<ul>
<li>根据获取到的当前语言，通过操作 DOM 来添加或修改相应的样式类。</li>
<li>示例：</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">if</span> (language === <span class="hljs-string">&#x27;en&#x27;</span>) &#123;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.element&#x27;</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;style-for-en&#x27;</span>);<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (language === <span class="hljs-string">&#x27;zh&#x27;</span>) &#123;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.element&#x27;</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;style-for-zh&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>2.1.2. 采用 CSS 自定义属性（CSS Variables）</strong></p>
<ul>
<li>在根元素上设置语言相关的自定义属性，然后在具体的样式中使用。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-pseudo">:root</span> &#123;<br>  <span class="hljs-attr">--fontSizeEn</span>: <span class="hljs-number">14px</span>;<br>  <span class="hljs-attr">--fontSizeZh</span>: <span class="hljs-number">16px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.text</span> &#123;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--fontSize$&#123;language&#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="2-2不同语言长度造成布局问题"><a href="#2-2不同语言长度造成布局问题" class="headerlink" title="2.2不同语言长度造成布局问题"></a>2.2不同语言长度造成布局问题</h3><p>在多语言编码时，不同语言应该有单独页面设计，或出于成本考虑应在设计时<strong>优先考虑响应式设计</strong>。</p>
<p>在CSS应避免直接width、height属性将宽高写死，应尽量用min-width、max-width、min-height、max-height代替，再根据超出最大宽度或者高度设置合理的超长样式，例如：省略显示、换行、自适应、滚动等。</p>
<p>注意：如果宽高设计时不允许有变化，则可以使用width、height</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs css">// 常用属性<br>white-break：nowrap;<br><span class="hljs-attribute">overflow</span>: hidden;<br><span class="hljs-attribute">overflow-x</span>: scroll;<br><span class="hljs-attribute">overflow-y</span>: scroll;<br><span class="hljs-attribute">text-overflow</span>: ellipsis;<br><br>//换行<br><span class="hljs-selector-class">.break-line</span>&#123;<br>	<span class="hljs-attribute">white-space</span>：wrap<br>&#125;<br>//省略样式<br><span class="hljs-selector-class">.ellipsis-single-line</span> &#123;<br>	<span class="hljs-attribute">min-width</span>: <span class="hljs-number">100px</span>;<br>  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>  <span class="hljs-attribute">white-space</span>: nowrap; //不换行<br>  <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>&#125;<br><span class="hljs-selector-class">.ellipsis-multi-line</span> &#123;<br>	<span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">display</span>: -webkit-box;<br>  -webkit-<span class="hljs-selector-tag">line</span>-clamp: <span class="hljs-number">3</span>; //最多显示<span class="hljs-number">3</span>行<br>  -webkit-box-orient: vertical;<br>  <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br>//水平滚动<br><span class="hljs-selector-class">.horizontal-scroll</span> &#123;<br>	<span class="hljs-attribute">max-width</span>：<span class="hljs-number">200px</span><br>  <span class="hljs-attribute">overflow-x</span>: scroll;<br>  <span class="hljs-attribute">white-space</span>: nowrap;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="3-RTL布局"><a href="#3-RTL布局" class="headerlink" title="3. RTL布局"></a>3. RTL布局</h2><h3 id="3-1-如何下手"><a href="#3-1-如何下手" class="headerlink" title="3.1 如何下手"></a>3.1 如何下手</h3><p><strong>RTL语言改造主要需要考虑四个方面：</strong></p>
<ul>
<li>布局结构（元素相对于整体的布局结构、元素内部布局结构）  在 RTL 模式下，页面的布局方向需要完全反转。这包括元素的排列顺序、边距和填充的方向等。</li>
<li>文字  文本的流向从左到右变为从右到左，这涉及到字符的顺序、标点的位置以及文字换行的规则等。不同语言的文字在 RTL 环境中的表现可能有所不同，需要进行针对性的处理。</li>
<li>图标、图片  一些图片和图标可能具有特定的方向性，在 RTL 模式下需要进行翻转或重新设计，以确保其视觉效果符合从右到左的阅读习惯。</li>
<li>交互  对于动态生成的内容和具有交互功能的元素，如表单、下拉菜单等，需要确保其在 RTL 模式下的操作和显示都是正确和直观的。</li>
</ul>
<h3 id="3-2-方案：html原生属性dir-“rtl”-css转换工具postcss-rtlcss"><a href="#3-2-方案：html原生属性dir-“rtl”-css转换工具postcss-rtlcss" class="headerlink" title="3.2 方案：html原生属性dir=“rtl”+ css转换工具postcss-rtlcss"></a>3.2 方案：<strong>html原生属性</strong><code>dir=“rtl”</code>+ css转换工具<code>postcss-rtlcss</code></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">css</span>: &#123;<br>    <span class="hljs-attr">loaderOptions</span>: &#123;<br>        <span class="hljs-attr">postcss</span>: &#123;  <span class="hljs-comment">// 配置 PostCSS 相关选项</span><br>            <span class="hljs-attr">postcssOptions</span>:&#123;<br>                <span class="hljs-attr">plugins</span>: [  <span class="hljs-comment">// 定义 PostCSS 插件数组</span><br>                    [<br>                        <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;postcss-rtlcss&#x27;</span>).<span class="hljs-title function_">postcssRTLCSS</span>(&#123;  <span class="hljs-comment">// 使用 postcss-rtlcss 插件并配置其选项</span><br>                            <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;combined&#x27;</span>,  <span class="hljs-comment">// 模式为&quot;combined&quot;</span><br>                            <span class="hljs-attr">ignorePrefixedRules</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// 忽略带前缀的规则</span><br>                            <span class="hljs-attr">ltrPrefix</span>: <span class="hljs-string">&#x27;[dir=&quot;ltr&quot;]&#x27;</span>,  <span class="hljs-comment">// 定义从左到右（LTR）的前缀</span><br>                            <span class="hljs-attr">rtlPrefix</span>: <span class="hljs-string">&#x27;[dir=&quot;rtl&quot;]&#x27;</span>,  <span class="hljs-comment">// 定义从右到左（RTL）的前缀</span><br>                            <span class="hljs-attr">bothPrefix</span>: <span class="hljs-string">&#x27;[dir]&#x27;</span>,  <span class="hljs-comment">// 定义同时适用于 LTR 和 RTL 的前缀</span><br>                            <span class="hljs-attr">safeBothPrefix</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// 安全的同时适用前缀</span><br>                            <span class="hljs-attr">processUrls</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// 处理 URL</span><br>                            <span class="hljs-attr">processKeyFrames</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// 处理关键帧</span><br>                            <span class="hljs-attr">useCalc</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// 使用计算功能</span><br>                        &#125;)<br><br>                    ]<br>                ]<br>            &#125;<br><br>          &#125;<br>        &#125;<br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">&quot;rtl&quot;</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;ar&quot;</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>...<br></code></pre></td></tr></table></figure>

<p>在html中默认的<code>dir=“ltr”</code>，整个文档是从左往右的基本方向，如果设置 <code>dir=“rtl”</code> 之后，基本方向则改为从右往左，文档中的所有块元素将继承此设置，除非方向被明确覆盖。</p>
<p>但是值只设置<code>dir=“rtl”</code>只能对以下属性生效：</p>
<ul>
<li><code>inline-block</code>、<code>flex</code>、<code>table</code>、<code>grid</code> 的布局方向</li>
<li>没有设置<code>text-align</code>属性的元素的文字方向</li>
</ul>
<p>像以下属性<code>dir=“rtl”</code>起不到作用：</p>
<ul>
<li><code>absolute</code> / <code>fixed</code>、<code>float</code>、<code>margin</code>、<code>padding</code> 、<code>text-align</code>等</li>
</ul>
<p>所以我们使用<code>postcss-rtlcss</code>来解决<code>dir</code>起不到作用的属性。</p>
<p><strong>3.2.1</strong> <code>postcss-rtlcss</code><strong>插件的使用</strong></p>
<p>按照 RTL 布局对 CSS 代码进行转换，原理是所有涉及左右方向性属性进行转换，例如：<code>margin-left</code> 改写成 <code>margin-right</code>，将 <code>left: 0;</code> 改写成 <code>right: 0;</code>。</p>
<p><img src="/img/88c54352-db7b-42bd-a75b-42faeaa7ea3a.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>拿国际化最佳实践导航举例：</strong></p>
<p>这是未使用rtlcss之前的代码</p>
<p><img src="/img/070b5844-bbcb-4f52-b7c7-6922d759ebe9.png" srcset="/img/loading.gif" lazyload></p>
<p>这是使用rtlcss对项目样式文件编译后的文件</p>
<p><img src="/img/ef8323e8-64ef-4aae-a074-d5043b0cf8db.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/40f6c564-22aa-4435-9252-2b799fe6d878.png" srcset="/img/loading.gif" lazyload></p>
<aside>
💡 [dir=”rtl”]代表当有dir=“rtl”时应用的属性，[dir=”ltr”]代表当有dir=“ltr”时应用的属性

<p>[dir]前缀是代表rtl时和ltr时，公用的样式<strong>含方向的样式</strong>，这样抽离出来是为了避免重复unset</p>
</aside>

<p>这里解释一下</p>
<p>原样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.test1</span>&#123;<br>	  <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<br>	  <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<br>	  <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>不抽离方向属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.test1</span>&#123;<br>	  <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<br>	  <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;<br>	  <span class="hljs-attribute">padding</span>:<span class="hljs-number">20px</span>;<br>	  <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-attr">[dir=<span class="hljs-string">&quot;ltr&quot;</span>]</span><span class="hljs-selector-class">.test</span>&#123;<br>		<span class="hljs-attribute">margin-left</span>:<span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-attr">[dir=<span class="hljs-string">&quot;rtl&quot;</span>]</span><span class="hljs-selector-class">.test</span>&#123;<br>		<span class="hljs-attribute">margin-left</span>:unset;<br>		<span class="hljs-attribute">margin-right</span>:<span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>抽离方向属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.test1</span>&#123;<br>	  <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;<br>	  <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;  <br>&#125;<br><br><span class="hljs-selector-attr">[dir]</span><span class="hljs-selector-class">.test</span>&#123;<br>		<span class="hljs-attribute">padding</span>:<span class="hljs-number">20px</span>;<br>&#125;<br><span class="hljs-selector-attr">[dir=<span class="hljs-string">&quot;ltr&quot;</span>]</span><span class="hljs-selector-class">.test</span>&#123;<br>		<span class="hljs-attribute">margin-left</span>:<span class="hljs-number">20px</span>;<br>&#125;<br><br><span class="hljs-selector-attr">[dir=<span class="hljs-string">&quot;rtl&quot;</span>]</span><span class="hljs-selector-class">.test</span>&#123;<br>		<span class="hljs-attribute">margin-right</span>:<span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>插件逻辑时先抽去所有方向属性到<code>[dir]</code>中，再将涉及左右转换的样式再抽离到<code>[dir=&quot;ltr&quot;]</code>或者<code>[dir=&quot;rtl&quot;]</code>中。这种样式抽取方式也就是组件的combined模式，这样好处代码量相对会少很多。</p>
<p>【注意】针对不需要镜像处理然后被插件镜像处理了的，我们需要通过<code>rtlcss</code>提供的注释<code>/*rtl:begin:ignore*/</code>和<code>/*rtl:end:ignore*/</code>来告诉插件不需要执行镜像操作。</p>
<p><img src="/img/aeb764d7-0d99-499f-8658-f7626b19b9ce.png" srcset="/img/loading.gif" lazyload></p>
<p>更多RTL请参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://rtlcss.com/learn/">https://rtlcss.com/learn/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.notion.so/1-3334908e1c5a4c2aaedfd4cf90291d7f?pvs=21">https://www.notion.so/1-3334908e1c5a4c2aaedfd4cf90291d7f?pvs=4#61eea16dd1fa49e5a595e20a363f7f29</a></li>
</ul>
<p><strong>3.2.2 JS中方向</strong></p>
<p><code>dir=”rtl”</code> 以及 <code>“postcss-rtlcss”</code> 只能解决 CSS 上的方向问题，解决不了 JS 中的方向问题，所以需要在函数中添加判断处理。</p>
<p>例如，利用 “i18next” 获取全局语言，封装一个判断 RTL 的函数，并绑定到 Vue 原型上</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isRTL</span>(<span class="hljs-params"></span>)&#123;<br>	<span class="hljs-keyword">if</span>(i18next.<span class="hljs-property">languge</span>===<span class="hljs-string">&#x27;ar&#x27;</span>)&#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>&#125;<br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$global</span> = &#123;<br>		isRTL<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="img/9be84739-81ca-43d9-9fd6-428b90074034.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>3.2.3 图片、图标</strong></p>
<p>图片和图标需要我们针对业务和当地人习惯单独判断是否需要镜像处理，一般建议针对需要镜像的图片或着图标重新设计，通过切换name的方式根据语言切换，否则就只能简单通过<code>transform:scaleX(-1)</code>方式直接镜像翻转。</p>
<ul>
<li><code>Iconfont</code> 使用方式  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;$global.isRTL()? &#x27;icon-name-rtl&#x27;:&#x27;icon-name&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><code>svg component</code> 使用方式  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">icon-name</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;$global.isRTL()? &#x27;rtl&#x27;:&#x27;ltr&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">icon-name</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<p>注： <code>svg components</code> 一般又组件库提供 ，不同的组件库的组件使用方式不同。</p>
<p><strong>3.2.4 第三方库的适配</strong></p>
<p>最好选择已经支持RTL的第三方库，因为如果不支持的话，我们就只能自己把项目fork出来，自行适配</p>
<h3 id="3-3-编码注意事项："><a href="#3-3-编码注意事项：" class="headerlink" title="3.3 编码注意事项："></a>3.3 编码注意事项：</h3><p>1.编写样式不要使用内联样式</p>
<ol start="2">
<li><p>不要逻辑属性和方向属性混用</p>
</li>
<li><p>关于背景图片 <code>background:url(”XXX”)</code>的RTL可以采用<code>background-position:right</code></p>
</li>
</ol>
<p>4.不需要镜像翻转的元素就可以用direction：ltr 来覆盖文档继承的进本方向</p>
<p>5.样式穿透时，前面要跟上父类，不要直修改</p>
<p>6.应尽量使用流式布局、flex布局、grid布局，尽量少使用相对定位、绝对定位、浮动布局。</p>
<p>注意：不应在 HTML 页面里通过 CSS 来实现基本方向的应用<code>direction:rtl</code>，主要是因为就算 CSS 不可用，希望方向信息是可用的。</p>
<h1 id="六、配置i18next数据本地化"><a href="#六、配置i18next数据本地化" class="headerlink" title="六、配置i18next数据本地化"></a>六、配置i18next数据本地化</h1><h2 id="1-基本语法格式"><a href="#1-基本语法格式" class="headerlink" title="1.基本语法格式"></a>1.基本语法格式</h2><p>资源串中定义：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Some format &#123;&#123;value, formatname&#125;&#125;&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;keyWithOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Some format &#123;&#123;value, formatname(option1Name: option1Value; option2Name: option2Value)&#125;&#125;&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>页面中使用：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123; value, <span class="hljs-attr">option1Name</span>: option1Value &#125;)<br><span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123; value, <span class="hljs-attr">formatParams</span>: &#123; <span class="hljs-attr">value</span>: &#123; <span class="hljs-attr">option1Name</span>: option1Value &#125; &#125;)<br></code></pre></td></tr></table></figure>

<p>其中<code>formatname</code>是格式化函数名称，i18next内置很多格式化函数其中包括<code>number</code>、<code>currency</code>、<code>relativetime</code>、<code>datetime</code>、<code>list</code>，其中这些内置函数都是基于JS的Intl实现，具体这些函数的option可参考MDN：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl">Intl - JavaScript | MDN (mozilla.org)</a></p>
<p><img src="/img/18640717-df38-4d1a-94a6-a20a37e723c9.png" srcset="/img/loading.gif" lazyload></p>
<p>当内置格式函数无法满足我们需求时我们可以使用i18next的自定义格式函数功能：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18next.<span class="hljs-property">services</span>.<span class="hljs-property">formatter</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;your-formatname&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">value, lng, options</span>) =&gt;</span> &#123;<br>	<span class="hljs-comment">// do something to format value</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">XXX</span>;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="1-单-复数"><a href="#1-单-复数" class="headerlink" title="1.单/复数"></a>1.单/复数</h2><p>基本使用方法如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br>&#123;<br>  <span class="hljs-string">&quot;key_one&quot;</span>: <span class="hljs-string">&quot;item&quot;</span>,<br>  <span class="hljs-string">&quot;key_other&quot;</span>: <span class="hljs-string">&quot;items&quot;</span>,<br>  <span class="hljs-string">&quot;keyWithCount_one&quot;</span>: <span class="hljs-string">&quot;&#123;&#123;count&#125;&#125; item&quot;</span>,<br>  <span class="hljs-string">&quot;keyWithCount_other&quot;</span>: <span class="hljs-string">&quot;&#123;&#123;count&#125;&#125; items&quot;</span><br>&#125;<br><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>&#125;); <span class="hljs-comment">// -&gt; &quot;items&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">1</span>&#125;); <span class="hljs-comment">// -&gt; &quot;item&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">5</span>&#125;); <span class="hljs-comment">// -&gt; &quot;items&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;key&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">100</span>&#125;); <span class="hljs-comment">// -&gt; &quot;items&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;keyWithCount&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">0</span>&#125;); <span class="hljs-comment">// -&gt; &quot;0 items&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;keyWithCount&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">1</span>&#125;); <span class="hljs-comment">// -&gt; &quot;1 item&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;keyWithCount&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">5</span>&#125;); <span class="hljs-comment">// -&gt; &quot;5 items&quot;</span><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;keyWithCount&#x27;</span>, &#123;<span class="hljs-attr">count</span>: <span class="hljs-number">100</span>&#125;); <span class="hljs-comment">// -&gt; &quot;100 items&quot;</span><br></code></pre></td></tr></table></figure>

<p>我们需要确认两件事情：</p>
<ul>
<li>该语言的单/复数语法规则有几种，这个参考 CLDR Language Plural Rules</li>
<li>对应词语单/复数形式</li>
</ul>
<p>注意：变量名必须是“count”，不可以起名val1、val2、value等其他值。</p>
<h2 id="2-数字格式"><a href="#2-数字格式" class="headerlink" title="2. 数字格式"></a><strong>2. 数字格式</strong></h2><p>使用内置格式化函数<code>number</code>即可，它会根据i18next的语言自动使用国家的数据格式</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// 日期</span><br>&#123;<br>  <span class="hljs-string">&quot;intlNumber&quot;</span>: <span class="hljs-string">&quot;Some &#123;&#123;val, number&#125;&#125;&quot;</span>,<br>&#125;<br><br>i18next.<span class="hljs-title function_">t</span>(<span class="hljs-string">&#x27;intlNumber&#x27;</span>, &#123; <span class="hljs-attr">val</span>: <span class="hljs-number">1000</span> &#125;);<br><span class="hljs-comment">// --&gt; Some 1,000</span><br></code></pre></td></tr></table></figure>

<p>当然如果有定制化需求，则可以利用i18next的自定义格式化函数功能：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18next.<span class="hljs-property">services</span>.<span class="hljs-property">formatter</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;numberFormat&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">value,lng</span>)=&gt;</span>&#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(lng).<span class="hljs-title function_">format</span>(value)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>（<code>numberFormat</code>的功能效果和<code>i18next</code>内置的格式化函数<code>number</code>效果一样）</p>
<h2 id="3-时区和日期本地化"><a href="#3-时区和日期本地化" class="headerlink" title="3. 时区和日期本地化"></a><strong>3. 时区和日期本地化</strong></h2><p>这里不推荐使用i18next内置格式化函数，使用相对繁琐，推荐结合i18next自定义格式化函数和第三方时间库<code>day.js</code>使用，具体对比如下</p>
<table>
<thead>
<tr>
<th></th>
<th>描述</th>
<th>体积</th>
<th>npm包</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://link.zhihu.com/?target=https://github.com/moment/moment">Moment</a></td>
<td>用于解析、验证、操作和格式化日期的 JavaScript 日期库.应该属于前端使用最广的日期处理库了。</td>
<td>包体积较大18</td>
<td>Vue版本：<a href="https://link.zhihu.com/?target=https://github.com/brockpetrie/vue-moment">vue-moment</a></td>
</tr>
<tr>
<td>React版本：<a href="https://link.zhihu.com/?target=https://github.com/headzoo/react-moment">react-moment</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://link.zhihu.com/?target=https://github.com/iamkun/dayjs">**Day.js</a>（推荐）**</td>
<td>一个仅 <strong>2kb</strong> 大小的<code>轻量级</code> JavaScript 时间日期处理库，和 Moment.js 的 API 设计保持完全一样。</td>
<td>仅<strong>2kb</strong></td>
<td>Vue版本：<a href="https://link.zhihu.com/?target=https://github.com/brockpetrie/vue-moment">vue-moment</a></td>
</tr>
<tr>
<td>React版本：<a href="https://link.zhihu.com/?target=https://github.com/devshawn/react-dayjs">react-dayjs</a></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>代码如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">dayTimeIntlFormat</span>(<span class="hljs-params">value</span>) &#123;<br>  <span class="hljs-keyword">let</span> dateParser = <span class="hljs-literal">null</span>;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(<span class="hljs-title class_">Number</span>(value))) &#123;<br>    value = <span class="hljs-title class_">Number</span>(value);<br>    dateParser = <span class="hljs-title function_">dayjs</span>(value);<br>  &#125;<br>  <span class="hljs-keyword">return</span> dateParser.<span class="hljs-title function_">format</span>(<span class="hljs-string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>);<br>&#125;<br><br>i18next.<span class="hljs-property">services</span>.<span class="hljs-property">formatter</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;dateformat&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> format.<span class="hljs-title function_">dayTimeIntlFormat</span>(value);<br>&#125;);<br></code></pre></td></tr></table></figure>

<aside>
💡 **问题1:  前后端跨时区导致时间错误问题？**

<p><strong>问题描述：</strong></p>
<p>以泰国举例，相关数据库部署在泰国。如果在中国创建一条数据插入泰国数据库，通过时间控件选择数据的创建时间，这时获取的时间是从浏览器获取 为中国时区时间。需要把这个时间传到后端服务器，存储到数据库，但服务器的时间为泰国时区的时间。中国是东八区 泰国是东七区，相差一个小时。这就会导致两个问题：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">a</span>、创建数据：在前端选的<span class="hljs-number">8</span>:<span class="hljs-number">00</span>，落到数据库中就会变为<span class="hljs-number">7</span>：<span class="hljs-number">00</span><br><br><span class="hljs-attribute">b</span>、数据查询时的错觉：在前端选择查询<span class="hljs-number">8</span>点到<span class="hljs-number">9</span>点创建的数据，到后端经过转换会变为查找<span class="hljs-number">7</span>:<span class="hljs-number">00</span>到<span class="hljs-number">8</span>点的消息，返回的数据又会带有相应的时区，导致，数据的一种假象。以为查的是<span class="hljs-number">8</span>点到<span class="hljs-number">9</span>点创建的数据，而实际看到的是<span class="hljs-number">7</span>:<span class="hljs-number">00</span>到<span class="hljs-number">8</span>点的消息。<br></code></pre></td></tr></table></figure>

<p>问题追踪发现，前端传过来的时间，在经过java时间格式转换后会转换为对应时区的时间。</p>
<p><strong>解决：</strong></p>
<p>1、这种问题一般数据库的时区设置为UTC时间，前端传的数据增加时区的字段，标识自己是哪个时区，后端将这个时间转为UTC时区传给数据库，同时，数据库返回的时间再转为前端需要的时区传递出去，这样会有效避免时区问题。</p>
<p>2、既然我们的数据库已经是当地的时区，无法改变，那一种有效的做法时，登录页面前做个选择时区的页面，用户选择切换到对应的时区，访问对应的数据源。</p>
<p>3、另外一种简单的做法：所有前端的时间去掉时间格式，作为字符串与后端交互。后端将时间转换为字符串传给前端，前端的时间同样处理为字符串传给后端，后端做时间处理，这样就可避免时区问题，做到前端时间可见即可得（前端展示什么，库中就是什么时间）</p>
</aside>

<h2 id="4-图标和图片"><a href="#4-图标和图片" class="headerlink" title="4. 图标和图片"></a><strong>4. 图标和图片</strong></h2><p>一些图标和图片可能在不同文化环境中有不同的意义。为了适应本地化需求，可以使用不同的图标和图片，或者根据语言环境切换不同的资源文件。</p>
<p>4.1 将所有图标直接生成两套资源，根据语言切换资源文件即可</p>
<p>4.2 规范化命名将所有图标重新增加一套命名，即增加-rtl后缀（无论是否需要翻转都增加-rtl），根据语言直接修改图标名称后缀即可</p>
<p>4.3 根据系统挨个修改icon图标名称或替换</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl">Intl - JavaScript | MDN</a></p>
<h1 id="七、提效工具i18n-Ally"><a href="#七、提效工具i18n-Ally" class="headerlink" title="七、提效工具i18n-Ally"></a>七、提效工具i18n-Ally</h1><h2 id="1-多语言资源管理"><a href="#1-多语言资源管理" class="headerlink" title="1.多语言资源管理"></a>1.多语言资源管理</h2><h3 id="1-1-资源属性样式配置"><a href="#1-1-资源属性样式配置" class="headerlink" title="1.1 资源属性样式配置"></a>1.1 资源属性样式配置</h3><p>i18n-Ally支持嵌套对象（nested）和路径平铺（flat）两种书写格式，这决定资源串的显示形式。</p>
<h3 id="1-2-适应不同项目的目录结构"><a href="#1-2-适应不同项目的目录结构" class="headerlink" title="1.2 适应不同项目的目录结构"></a>1.2 适应不同项目的目录结构</h3><p><strong>Options</strong></p>
<p>The path matcher matches the relative path from your locale folder. File paths with no match will not be loaded.</p>
<p>Some common examples:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">&#123;locale&#125;/&#123;<span class="hljs-keyword">namespace</span>&#125;.&#123;ext&#125;   <span class="hljs-meta"># matches <span class="hljs-string">&quot;zh-CN/attributes.yaml&quot;</span></span><br><br>&#123;namespaces&#125;/&#123;locale&#125;.&#123;ext&#125;  <span class="hljs-meta"># matches <span class="hljs-string">&quot;common/users/en-US.json&quot;</span></span><br><br>&#123;locale&#125;.json                <span class="hljs-meta"># matches <span class="hljs-string">&quot;fr-FR.json&quot;</span></span><br></code></pre></td></tr></table></figure>

<p>The following table lists some matchers you may want to use. is required, while the others are optional.<code>&#123;locale&#125;</code></p>
<table>
<thead>
<tr>
<th>Matcher</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>&#123;locale&#125;</code></td>
<td>Match the locale code, etc.<code>en-USzh-CNfr</code></td>
</tr>
<tr>
<td><code>&#123;namespace&#125;</code></td>
<td>Match anything excludes folder separator . It only matches one level of directories<code>/</code></td>
</tr>
<tr>
<td><code>&#123;namespaces&#125;</code></td>
<td>Match anything. It can match multiple levels of directories. The folder separator will be converted to in keypath<code>.</code></td>
</tr>
<tr>
<td><code>&#123;ext&#125;</code></td>
<td>File extensions, based on current enabled parsers</td>
</tr>
<tr>
<td><code>&#123;locale?&#125;</code></td>
<td>Optional version of , if not locale captured, the current source language will be applied<code>&#123;locale&#125;</code></td>
</tr>
<tr>
<td><code>&#123;namespace?&#125;</code></td>
<td>Optional version of <code>&#123;namespace&#125;</code></td>
</tr>
<tr>
<td><code>&#123;namespaces?&#125;</code></td>
<td>Optional version of <code>&#123;namespaces&#125;</code></td>
</tr>
</tbody></table>
<p>例1：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18n<br>  ├── nl-<span class="hljs-variable constant_">NL</span><br>  |   ├── general<br>  |   |   └── ...<br>  |   ├── attributes<br>  |   |   └── foo.<span class="hljs-property">yaml</span><br>  |   └── ...<br>  ├── en<br>  |   ├── general<br>  |   |   └── ...<br>  |   ├── attributes<br>  |   |   └── foo.<span class="hljs-property">yaml</span><br>  |   └── ...<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Path Matcher</span><br><span class="hljs-string">&#x27;&#123;locale&#125;/&#123;namespaces&#125;.yaml&#x27;</span><br><br><span class="hljs-comment">// Example Path</span><br><span class="hljs-string">&#x27;nl-NL/attributes/foo.yaml&#x27;</span><br><br><span class="hljs-comment">// Matched result</span><br>&#123; <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;nl-NL&#x27;</span>, <span class="hljs-attr">namespace</span>: <span class="hljs-string">&#x27;attributes.foo&#x27;</span> &#125;<br><br><span class="hljs-comment">// Example usage</span><br>$t(<span class="hljs-string">&#x27;attributes.foo.your-key&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>例2:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx">i18n<br>  ├── general<br>  |   ├── nl.<span class="hljs-property">yaml</span><br>  |   ├── de.<span class="hljs-property">yaml</span><br>  |   ├── en.<span class="hljs-property">yaml</span><br>  |   └── ...<br>  ├── attributes<br>  |   ├── foo<br>  |   |   ├── nl.<span class="hljs-property">yaml</span><br>  |   |   ├── de.<span class="hljs-property">yaml</span><br>  |   |   ├── en.<span class="hljs-property">yaml</span><br>  |   |   └── ...<br>  |   ├── bar<br>  |   |    └── ...<br>  |   └── ...<br>  ├──  resources<br>  |    └── ...<br>  └── ...<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Path Matcher</span><br><span class="hljs-string">&#x27;&#123;namespaces&#125;/&#123;locale&#125;.yaml&#x27;</span><br><br><span class="hljs-comment">// Example Path</span><br><span class="hljs-string">&#x27;attributes/bar/en.yaml&#x27;</span><br><br><span class="hljs-comment">// Matched result</span><br>&#123; <span class="hljs-attr">locale</span>: <span class="hljs-string">&#x27;en&#x27;</span>, <span class="hljs-attr">namespace</span>: <span class="hljs-string">&#x27;attributes.bar&#x27;</span> &#125;<br><br><span class="hljs-comment">// Example usage</span><br>$t(<span class="hljs-string">&#x27;attributes.bar.your-key&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h2 id="2-统一的增删改查"><a href="#2-统一的增删改查" class="headerlink" title="2. 统一的增删改查"></a>2. 统一的增删改查</h2><h3 id="2-1快速定位key的位置"><a href="#2-1快速定位key的位置" class="headerlink" title="2.1快速定位key的位置"></a>2.1快速定位key的位置</h3><p><img src="/img/ff1437a2-1679-4ca1-b685-5cb2059fcb9f.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/078997a4-249f-4171-802a-9290af0c5f7b.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-2-同key不同语言的value一键修改"><a href="#2-2-同key不同语言的value一键修改" class="headerlink" title="2.2 同key不同语言的value一键修改"></a>2.2 同key不同语言的value一键修改</h3><p><img src="/img/b5878d00-7e60-414d-9d5f-20de2e7dccfb.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/2420b883-384d-4f6b-a1e2-905c0c9ca0d7.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-3-资源串key的一键重命名"><a href="#2-3-资源串key的一键重命名" class="headerlink" title="2.3 资源串key的一键重命名"></a>2.3 资源串key的一键重命名</h3><p><img src="/img/a7c0ee39-c57a-45c7-bd12-1599c3552058.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="3-显示指定语言"><a href="#3-显示指定语言" class="headerlink" title="3.显示指定语言"></a>3.显示指定语言</h2><p><img src="/img/2c069c40-f48e-4199-b405-0556bbe21398.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="4-翻译进度显示与漏翻检查"><a href="#4-翻译进度显示与漏翻检查" class="headerlink" title="4.翻译进度显示与漏翻检查"></a>4.翻译进度显示与漏翻检查</h2><p>全局所有页面各个语言翻译进度的检查以及全局漏翻检查</p>
<p><img src="/img/02290760-eb14-4bbd-956c-5c0df22b0ab1.png" srcset="/img/loading.gif" lazyload></p>
<p>当前页面的漏翻检查</p>
<p><img src="/img/77886336-e35b-4af3-986e-3eb1f68d774f.png" srcset="/img/loading.gif" lazyload></p>
<p>注：默认中文算漏翻，英文不会统计在内</p>
<h2 id="5-在线自动翻译（黄云不可用）"><a href="#5-在线自动翻译（黄云不可用）" class="headerlink" title="5. 在线自动翻译（黄云不可用）"></a>5. 在线自动翻译（黄云不可用）</h2><p>可以单个自动翻译</p>
<p><img src="/img/5f0d99f9-935f-479e-a423-f230651a6c19.png" srcset="/img/loading.gif" lazyload></p>
<p>也可一键翻译</p>
<p><img src="/img/e015e71c-86dc-450b-84e9-f5261f8e3f5e.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="6-提取key"><a href="#6-提取key" class="headerlink" title="6.提取key"></a>6.提取key</h2><h3 id="6-1一键提取当前页面key"><a href="#6-1一键提取当前页面key" class="headerlink" title="6.1一键提取当前页面key"></a>6.1一键提取当前页面key</h3><p><img src="/img/ffa34c45-08d8-4eed-ace3-8216d09c3e0d.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="6-2半手动快速提取key"><a href="#6-2半手动快速提取key" class="headerlink" title="6.2半手动快速提取key"></a>6.2半手动快速提取key</h3><p><img src="/img/36a36d3d-8acd-4d11-844f-bf738e94061e.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/49249dd8-3726-4736-8350-d4081f1851d0.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="7-可评论"><a href="#7-可评论" class="headerlink" title="7.可评论"></a>7.可评论</h2><p>用于多人协作以及check，默认评论的文件会存储在<code>.vscode/i18n-ally-reviews.yml</code>中，建议将此文件提交到 git 中。</p>
<p><img src="/img/8d67ef7f-1d7b-477f-b698-24e5bca92905.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/3b30c2e7-f2ca-474b-9aec-4f822de3651f.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/b9850b98-7ea6-4d13-882c-8d91d0873e60.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/img/3747fe94-95e3-4ce2-8637-96a24513d5e8.png" srcset="/img/loading.gif" lazyload></p>
<p>更多设置参考官网：<a target="_blank" rel="noopener" href="https://github.com/lokalise/i18n-ally/wiki">Home · lokalise/i18n-ally Wiki (github.com)</a></p>
<h1 id="八、推荐方案"><a href="#八、推荐方案" class="headerlink" title="八、推荐方案"></a>八、推荐方案</h1><table>
<thead>
<tr>
<th><strong>静态文案翻译</strong></th>
<th>通过<a target="_blank" rel="noopener" href="http://i18next.github.io/i18next-scanner">i18next-scanner</a> 或者  <strong><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://marketplace.visualstudio.com/items?itemName=lokalise.i18n-ally&source=article&objectId=2349931">i18n Ally</a></strong> 插件自动提取</th>
</tr>
</thead>
<tbody><tr>
<td><strong>动态文案翻译</strong></td>
<td>方案一：接口增加语言参数，后端直接返回相应的语言。</td>
</tr>
<tr>
<td>方案二：与后端增加代码映射，将文本放到前端字典中</td>
<td></td>
</tr>
<tr>
<td><strong>语言包命名空间</strong></td>
<td>按照【一级菜单】为最小颗粒度</td>
</tr>
<tr>
<td><strong>国际化框架</strong></td>
<td>采用i18next</td>
</tr>
<tr>
<td><strong>不同语言样式</strong></td>
<td>利用css选择器特性，单独写相应语言css实现</td>
</tr>
<tr>
<td><strong>RTL布局</strong></td>
<td>css采用<code>direction：rtl</code> + <code>rtlcs插件</code></td>
</tr>
<tr>
<td><strong>多语言布局</strong></td>
<td>采用同一套布局（RTL除外）</td>
</tr>
<tr>
<td><strong>本地化</strong></td>
<td>采用i18next内置api，其中时间本地采用day.js库来完成</td>
</tr>
<tr>
<td><strong>图标图片</strong></td>
<td>设计针对需要翻转图片图标命名增加-rtl标识</td>
</tr>
<tr>
<td><strong>打包方式</strong></td>
<td>采用import 按需加载</td>
</tr>
<tr>
<td><strong>翻译检查</strong></td>
<td>采用<a target="_blank" rel="noopener" href="https://github.com/locize/translation-check">translation-check</a>插件</td>
</tr>
<tr>
<td><strong>第三方npm国际化支持</strong></td>
<td>需要第三方作相应的适配</td>
</tr>
<tr>
<td><strong>辅助工具</strong></td>
<td><strong>VSCode 的 <a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https://marketplace.visualstudio.com/items?itemName=lokalise.i18n-ally&source=article&objectId=2349931">i18n Ally</a> 插件</strong></td>
</tr>
</tbody></table>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%9B%BD%E9%99%85%E5%8C%96/" class="category-chain-item">国际化</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" class="print-no-link">#国际化</a>
      
        <a href="/tags/%E6%96%B9%E6%A1%88/" class="print-no-link">#方案</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>国际化开发解决方案指南</div>
      <div>http://example.com/2024/05/20/国际化开发解决方案指南/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Vito</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年5月20日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/05/05/font-family%E5%9C%A8%E5%A4%9A%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" title="font-family在多语言中的应用">
                        <span class="hidden-mobile">font-family在多语言中的应用</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
